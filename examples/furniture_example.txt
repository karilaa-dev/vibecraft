# VibeCraft Example: Furniture Placement

This example demonstrates proper furniture placement using spatial awareness.

## Prerequisites

You need an enclosed room with a floor. If you don't have one, see [basic_building_example.txt](basic_building_example.txt) first.

Assume we have a 10x10 room:
- Floor: Y=64 (oak_planks)
- Walls: Y=64 to Y=68 (stone_bricks)
- Ceiling: Y=68 (oak_planks)
- Interior: X=101-108, Y=65-67, Z=201-208

## Step 1: Browse Furniture Catalog

User: "What furniture is available?"

Agent uses:
- furniture_lookup(action="browse")

Returns: List of 60+ furniture designs organized by category

User: "Show me bedroom furniture"

Agent uses:
- furniture_lookup(action="search", category="bedroom")

Returns: Beds, nightstands, dressers, wardrobes, lamps

## Step 2: Get Specific Furniture Details

User: "Show me details for a simple bed"

Agent uses:
- furniture_lookup(action="get", furniture_id="simple_bed")

Returns: Dimensions (2x1x1), materials, placement instructions

## Step 3: CRITICAL - Scan Before Placing

User: "Place the bed in the corner at X=102, Z=202"

Agent:
1. **MUST scan first** - This is critical!
   - spatial_awareness_scan(
       center_x=102,
       center_y=65,  # Rough estimate (room interior)
       center_z=202,
       radius=3,
       detail_level="medium"
     )

   Returns:
   {
     "floor_y": 64,  # Floor block is at Y=64
     "ceiling_y": 68,
     "recommendations": {
       "floor_placement_y": 65,  # ← Place furniture HERE!
       "ceiling_height": 4,
       "clear_for_placement": true
     }
   }

2. **Use recommended Y** (not floor_y!):
   - place_furniture(
       furniture_id="simple_bed",
       origin_x=102,
       origin_y=65,  # ← From recommendations.floor_placement_y
       origin_z=202,
       place_on_surface=true  # Default, places ON floor
     )

Result: ✅ Bed sits perfectly ON floor at Y=65 (floor block at Y=64)

## Step 4: Add More Furniture

User: "Add a nightstand next to the bed and a lamp on the ceiling above"

Agent:
1. Nightstand (floor furniture):
   - Scans at X=104, Z=202
   - Gets floor_placement_y=65
   - Places nightstand at Y=65

2. Ceiling lamp (hanging furniture):
   - Scans at X=103, Z=202 (above bed)
   - Gets ceiling_placement_y=68
   - Places lantern at Y=68 (hangs from ceiling)

Result: Complete bedroom corner with proper placement

## Step 5: Verify Clearance

User: "Can I fit a dresser at X=106, Z=202?"

Agent:
1. Scans area:
   - spatial_awareness_scan(
       center_x=106,
       center_y=65,
       center_z=202,
       radius=3,
       detail_level="medium"
     )

2. Checks clearance:
   - Returns clearance in all directions
   - Dresser needs 2 blocks width
   - Verifies east/west clearance > 2

3. Places if clear:
   - place_furniture(furniture_id="dresser", origin_x=106, origin_y=65, origin_z=202)

Result: Dresser placed with verified space

## Common Placement Errors - AVOID THESE!

### ❌ ERROR 1: Placing Without Scanning
```
User: "Place a table at 105, 65, 205"

BAD Agent:
place_furniture(furniture_id="table", origin_x=105, origin_y=65, origin_z=205)
# Result: Table might be IN floor or floating!
```

**Why Wrong**: Assumed Y=65 without verifying actual floor level.

**Fix**: ALWAYS scan first to get floor_placement_y!

### ❌ ERROR 2: Using floor_y Instead of floor_placement_y
```
scan_result = spatial_awareness_scan(...)
# scan_result["floor_y"] = 64 (floor block)
# scan_result["recommendations"]["floor_placement_y"] = 65 (furniture placement)

BAD Agent:
place_furniture(origin_y=scan_result["floor_y"])  # Y=64 - WRONG!
# Result: Furniture embedded IN floor block!
```

**Fix**: Use `recommendations.floor_placement_y` (one block ABOVE floor block).

### ❌ ERROR 3: Ignoring place_on_surface Parameter
```
surface_y = get_surface_level(x=100, z=200)
# Returns: Y=64 (floor block)

BAD Agent:
place_furniture(origin_y=surface_y, place_on_surface=false)
# Result: Furniture replaces floor block!
```

**Fix**: Use `place_on_surface=true` (default) to place ON TOP of surface_y.

## Key Principles

1. **ALWAYS scan before placing** - Never guess Y coordinates
2. **Use recommendations.floor_placement_y** - Not floor_y!
3. **Check clearance** - Ensure furniture fits
4. **Verify after placing** - Scan again to confirm correct placement

## Next Steps

- Try placing multiple furniture pieces to create a complete room
- Experiment with different room layouts
- See [terrain_example.txt](terrain_example.txt) for outdoor landscaping
